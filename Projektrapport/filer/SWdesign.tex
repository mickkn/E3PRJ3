\section{Softwaredesign}

\subsection{Applicationsmodel}
I softwaredesign-fasen laves applikationsmodeller for de forskellige use cases for at få et overblik over hvilke metoder og funktioner der skulle bruges. Applikationsmodellen består af, at man først laver sekvensdiagrammer for hvert use case. Hvis man finder det nødvendigt for at få et overblik kan man også lave state machine-diagrammer over hvert use case. Dette er ikke vurderet nødvendigt hvorfor det step er udeladt.

Næste step i applikationsmodellen er at få alle metode-kald i sekvensdiagrammerne, over i et klassediagram. Dette klassediagram er ment som et overblik som kan benyttes når man går i gang med den endelige klassebeskrivelse.

I klassebeskrivelsen besluttes der så hvilke datatyper man vil have i de forskellige klasser og hvad de enkelte klasser hver i sær har ansvar for. Når klassebeskrivelserne er udarbejdet vil man så komme frem til et statisk klassediagram som er endeligt. Se dokumentationen afsnit 6.2 Applikationsmodeller for detaljer.

\figur{1}{a_uc2}{Sekvensdiagram fra applikationsmodel}{fig:devkit_a_uc2}

I figur \ref{fig:devkit_a_uc2} kan man se et eksempel på et sekvensdiagram udviklet i vores applikationsmodel. Sekvensdiagrammet er lavet ud fra use case 2: Konfig. Den viser alle de involverede klasser og metode-kaldene imellem dem.

På figur \ref{fig:devkit_class} kan man se vores konceptuelle klassediagram som er udviklet i applikationsmodellen.

\figur{1}{sw_class_devkit}{klassediagram fra applikationsmodellen}{fig:devkit_class}

Applikationsmodellen er benyttet både til softwaredesign af koden til Devkit8000 og PSoC4. Det er dog to forskellige frameworks der arbejdes i, men dette har ingen indflydelse på applikationsmodelen da denne beskæftiger sig med konceptet i hvordan koden skal fungere og ikke implementeringen af den. På PSoC4 er det ikke muligt at arbejde i \verb-C++- og med objekt orienteret programmering som dokumentationen lægger op til. Dette løses ved at fortolke klassebeskrivelsen iht. UML-Light\footnote{T-133 UML-Light af Finn Overgaard Hansen. Benyttet i forbindelse med I1ORPG(Objektorienteret programmering) på 1. semester}.

\subsection{Klassebeskrivelser}

Efter applikationsmodellen blev klasserne beskrevet. Hver klasse har et overordnet ansvar. F.eks har controller-klassen \verb+Config+ som blev beskrevet på figur \ref{fig:devkit_a_uc2} ansvaret for at styre UC2. Hver metode i klassen har således en beskrivelse af hvad metode skal gøre, hvilke parametre den modtager og hvad metoden returnere. Over hele projektet er der aftalt at alle metoder skulle returnere en integer for at der kunne laves fejl-tjek på dem. Det vil sige at når metoderne skulle modulere noget data som den fik tilsendt så skulle det være en pointer den modtog.

Efter klassebeskrivelserne havde man fået opdateret sit konceptuelle klassediagram med alle de nye medlemsdata, parametre og datatyper man havde besluttet sig for at benytte i de pågældende klasser. Dette nye opdateret klassediagram kan ses på figur \ref{fig:sw_class_static} i Softwareimplementeringen, afsnit \ref{head:sw_impl}. Se alle klassebeskrivelser i dokumentationen afsnit 6.2.3 Klassebeskrivelser.

%SPI
\input{filer/design/sw_spi}