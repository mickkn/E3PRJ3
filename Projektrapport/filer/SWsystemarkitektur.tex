\section{Softwarearkitektur (BS JC)}

For at få et overblik over hvad der skal laves af software anvendes en metode kaldet N+1\footnote{\url{http://goo.gl/kU89oe} [2014-11-02]}. Metoden kan justeres til at dække det omfang som er nødvendigt. I projektet bliver følgende fire dele anvendt.

\begin{enumerate}
	\item Logical View
	\item Deployment View
	\item Implementation View
	\item Data View
\end{enumerate}

Her følger en kort beskrivelse af indholdet af hvert punkt og de væsentlige konklusioner der laves her fra. Se mere i dokumentationen i afsnit 4.3 Softwarebeskrivelse.

\subsection{Logical View}
Dette view giver et overblik over hvilke logiske blokke som skal bruges på de forskellige platforme, i dette tilfælde Master (Devkit8000) og Enhed (PSoC4). Det viser også forskellige softwarelag. Disse er udledt ved at kigge use case-beskrivelserne igennem og resonere over hvilke ting der konceptuelt er nødvendige.

På figur \ref{fig:SW_Logic_view} kan man se de tre lag samt, i alt, syv pakker. Bemærk at disse ikke nødvendigvis ender med at blive implementeret således, men de giver et overblik over den funktionalitet der er nødvendig.

\figur{1}{SW_Logical_view_devkit}{Logical View for Devkit8000}{fig:SW_Logic_view}

\subsection{Deployment View}
Her beskrives hvor de logiske pakker fra Logical View ligger på hardwaren. Dette er for at få et overblik over et distribueret system og for at kunne lave en vurdering af hvilket framework eller programmeringssprog der skal anvendes til de enkelte klasser. På figur \ref{fig:SW_Deployment_model} kan man se hvor de to logiske pakker skal implementeres.

\figur{1}{SW_Deployment_model}{Deployment View for EasyWater8000}{fig:SW_Deployment_model}

\subsection{Implementation View}
Dette er en kort beskrivelse af hvilken filstruktur der anvendes til opbygningen af software. Dette beskrives for at ensrette kildefilerne og give et godt overblik over hvor de forskellige ting ligger gemt.
Se dokumentationen afsnit 4.3.3 Implementation View for detaljer.

\subsection{Data View}
Her beskrives datahåndteringen i systemet. Oprindeligt var det tiltænkt at information om enheder skulle gemmes på Master så de kan findes frem, hvis systemet slukkes og tændes igen. Dette er ikke implementeret, men beskrives alligevel.

Her er beskrivelsen af selve filstrukturen af den gemte data og hvordan de enkelte filer skal være opbyggede. 
Et eksempel er vist i listing \ref{list:csv}.

\begin{lstlisting}[caption=Semikolon-separeret datafil til log af enheder, label={list:csv}]
<enheds-nr>;
<KP-nr>; <dato>; <temperatur>; <fugtighed>; <bevaeglse>; <vanding>;
<KP-nr>; <dato>; <temperatur>; <fugtighed>; <bevaeglse>; <vanding>;
...
<KP-nr>; <dato>; <temperatur>; <fugtighed>; <bevaeglse>; <vanding>;
\end{lstlisting}


\input{filer/kommunikationsprotokol}
